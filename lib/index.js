(()=>{"use strict";var t,e=function(){function t(t){this.data=t}return t.prototype.getRoot=function(){return this.data.nodes.filter((function(t){return null===t.parent}))[0]},t.prototype.setNumberNodeValue=function(t,e){this.getNodeByConstId(t),console.log("setting number node ".concat(t," to ").concat(e))},t.prototype.getNodesByClass=function(t){return this.data.nodes.filter((function(e){var o;return null===(o=e.data.classes)||void 0===o?void 0:o.includes(t)}))},t.prototype.getNodeByConstId=function(t){var e=this.data.nodes.filter((function(e){return e.data.const_id===t}));if(0===e.length)throw new l("Node with id ".concat(t," does not exist in this NodeSource"));return e.length>1&&console.error("Trying to get more than 1 node with id "+t),e[0]},t}(),o=(t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)},function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(a.prototype=o.prototype,new a)}),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.addToConclusions=function(t,e){console.log('Node id: "'.concat(t,'" adds to conclusions "').concat(e,'"'))},e.prototype.deselectNodeWithId=function(t){console.log("Deselecting node with id ".concat(t),this.getNodeByConstId(t))},e.prototype.isNodeIdInReport=function(t){var e=this.data.nodes.filter((function(e){return e.data.const_id===t}));return 0!==e.length&&(e.length>1&&console.error("Trying to get more than 1 node with id "+t),!0)},e}(e),n=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(a.prototype=o.prototype,new a)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.selectNodesWithClass=function(t){console.log("Selecting node with class ".concat(t),this.getNodesByClass(t))},e.prototype.selectNodeWithId=function(t){console.log("Selecting node with id ".concat(t),this.getNodeByConstId(t));var e=this.getNodeByConstId(t);s.report.data.nodes.push(e)},e}(e);const i=JSON.parse('{"title":"Simple report","owner":"admin","id":391,"nodes":[{"id":0,"type":"ReportRoot","parent":null,"data":{"text":"report report"}},{"id":1,"type":"Property","parent":0,"data":{"const_id":"sleepiness","text":"senność"}}]}'),d=JSON.parse('{"discipline":"radiologia","category":"tk","title":"Tomografia komputerowa jamy brzusznej i miednicy małej","owner":"admin","id":1,"languages":["pl","en"],"nodes":[{"id":3,"type":"Concept","parent":2,"order":8,"data":{"text":"Środek kontrastujący"}},{"id":6,"type":"Concept","parent":2,"order":8,"data":{"text":"Fazy"}},{"id":11,"type":"Concept","parent":10,"order":8,"data":{"text":"Zmiany onkologiczne"}},{"id":15,"type":"Concept","parent":10,"order":8,"data":{"text":"Zmiany zapalne"}},{"id":18,"type":"Concept","parent":17,"order":8,"data":{"text":"Płyn"}},{"id":23,"type":"Concept","parent":22,"order":8,"data":{"text":"Rozmiar i kształt"}},{"id":666,"type":"Number","parent":23,"order":8,"data":{"const_id":"weight","prefix":"weight","text":"80","suffix":"kg"}},{"id":667,"type":"Number","parent":23,"order":8,"data":{"prefix":"weight","text":"80","suffix":"kg"}},{"id":667,"type":"Number","parent":23,"order":8,"data":{"const_id":"height","prefix":"height","text":"1.75","suffix":"m"}},{"id":667,"type":"Number","parent":23,"order":8,"data":{"const_id":"BMI","prefix":"BMI","text":"0","suffix":""}},{"id":667,"type":"Number","parent":23,"order":8,"data":{"const_id":"TT-TG","prefix":"TT-TG","text":"0","suffix":""}},{"id":9991,"type":"Property","parent":23,"order":8,"data":{"class":"symptom","const_id":"sleepiness","text":"senność"}},{"id":29,"type":"Concept","parent":22,"order":8,"data":{"text":"Zmiany onkologiczne"}},{"id":36,"type":"Concept","parent":22,"order":8,"data":{"text":"Zmiany strukturalne"}},{"id":41,"type":"Concept","parent":22,"order":8,"data":{"text":"Perfuzja"}},{"id":44,"type":"Concept","parent":43,"order":8,"data":{"text":"Struktura"}},{"id":49,"type":"Concept","parent":43,"order":8,"data":{"text":"Złogi"}},{"id":54,"type":"Concept","parent":43,"order":8,"data":{"text":"Nacieki"}},{"id":56,"type":"Concept","parent":43,"order":8,"data":{"text":"Żółć"}},{"id":59,"type":"Concept","parent":58,"order":8,"data":{"text":"Szerokość"}},{"id":65,"type":"Concept","parent":58,"order":8,"data":{"text":"Endoproteza"}},{"id":68,"type":"Concept","parent":67,"order":8,"data":{"text":"Budowa"}},{"id":73,"type":"Concept","parent":67,"order":8,"data":{"text":"Zmiany onkologiczne"}},{"id":78,"type":"Concept","parent":67,"order":8,"data":{"text":"Płyn"}},{"id":82,"type":"Concept","parent":81,"order":8,"data":{"text":"Rozmiar"}},{"id":87,"type":"Concept","parent":86,"order":8,"data":{"text":"Budowa"}},{"id":92,"type":"Concept","parent":86,"order":9,"data":{"text":"Przepuklina"}},{"id":95,"type":"Concept","parent":94,"order":8,"data":{"text":"Budowa"}},{"id":101,"type":"Concept","parent":100,"order":8,"data":{"text":"Kształt"}},{"id":104,"type":"Concept","parent":100,"order":8,"data":{"text":"Zwapnienia"}},{"id":106,"type":"Concept","parent":100,"order":8,"data":{"text":"Płyn"}},{"id":109,"type":"Concept","parent":100,"order":8,"data":{"text":"Loża"}},{"id":111,"type":"Concept","parent":100,"order":8,"data":{"text":"Zmiany onkologiczne"}},{"id":114,"type":"Concept","parent":113,"order":8,"data":{"text":"Rozmiar"}},{"id":118,"type":"Concept","parent":113,"order":8,"data":{"text":"Zmiany onkologiczne"}},{"id":124,"type":"Concept","parent":123,"order":8,"data":{"text":"Rozmiar"}},{"id":126,"type":"Concept","parent":123,"order":8,"data":{"text":"Zmiany onkologiczne"}},{"id":128,"type":"Concept","parent":123,"order":8,"data":{"text":"Złogi"}},{"id":130,"type":"Concept","parent":123,"order":7,"data":{"text":"Położenie"}},{"id":132,"type":"Concept","parent":123,"order":8,"data":{"text":"Obecność moczu"}},{"id":134,"type":"Concept","parent":123,"order":8,"data":{"text":"Zakontrastowanie"}},{"id":136,"type":"Concept","parent":123,"order":8,"data":{"text":"Wydzielanie"}},{"id":138,"type":"Concept","parent":123,"order":8,"data":{"text":"Torbiele"}},{"id":140,"type":"Concept","parent":123,"order":8,"data":{"text":"Kora nerkowa"}},{"id":143,"type":"Concept","parent":142,"order":7,"data":{"text":"Kielichy"}},{"id":145,"type":"Concept","parent":142,"order":8,"data":{"text":"Miedniczka"}},{"id":147,"type":"Concept","parent":142,"order":4,"data":{"text":"Torbiele"}},{"id":150,"type":"Concept","parent":142,"order":5,"data":{"text":"Tętnica nerkowa"}},{"id":152,"type":"Concept","parent":142,"order":2,"data":{"text":"Złogi"}},{"id":155,"type":"Concept","parent":142,"order":3,"data":{"text":"Zmiany onkologiczne"}},{"id":158,"type":"Concept","parent":142,"order":6,"data":{"text":"Rozmiar"}},{"id":161,"type":"Concept","parent":142,"order":0,"data":{"text":"Położenie"}},{"id":163,"type":"Concept","parent":142,"order":1,"data":{"text":"Obecność moczu"}},{"id":167,"type":"Concept","parent":166,"order":0,"data":{"text":"Położenie"}},{"id":169,"type":"Concept","parent":166,"order":1,"data":{"text":"Obecność oczu"}},{"id":172,"type":"Concept","parent":166,"order":2,"data":{"text":"Złogi"}},{"id":175,"type":"Concept","parent":166,"order":3,"data":{"text":"Zmiany onkologiczne"}},{"id":178,"type":"Concept","parent":166,"order":4,"data":{"text":"Torbiele"}},{"id":181,"type":"Concept","parent":166,"order":5,"data":{"text":"Tętnica nerkowa"}},{"id":183,"type":"Concept","parent":166,"order":6,"data":{"text":"Rozmiar"}},{"id":186,"type":"Concept","parent":166,"order":7,"data":{"text":"Kielichy"}},{"id":188,"type":"Concept","parent":166,"order":8,"data":{"text":"Miedniczka"}},{"id":191,"type":"Concept","parent":190,"order":0,"data":{"text":"Szerokość"}},{"id":198,"type":"Concept","parent":197,"order":0,"data":{"text":"Kształt"}},{"id":205,"type":"Concept","parent":197,"order":1,"data":{"text":"Ściana"}},{"id":209,"type":"Concept","parent":208,"order":0,"data":{"text":"Kształt i rozmiar"}},{"id":215,"type":"Concept","parent":208,"order":1,"data":{"text":"Struktura"}},{"id":219,"type":"Concept","parent":208,"order":2,"data":{"text":"Pęcherzyki nasienne"}},{"id":222,"type":"Concept","parent":221,"order":0,"data":{"text":"Struktura"}},{"id":227,"type":"Concept","parent":221,"order":1,"data":{"text":"Endometrium"}},{"id":228,"type":"Concept","parent":221,"order":2,"data":{"text":"Jajnik lewy"}},{"id":231,"type":"Concept","parent":221,"order":3,"data":{"text":"Jajnik prawy"}},{"id":234,"type":"Concept","parent":221,"order":4,"data":{"text":"Macica"}},{"id":238,"type":"Concept","parent":237,"order":0,"data":{"text":"Zaotrzewnowe"}},{"id":240,"type":"Concept","parent":237,"order":1,"data":{"text":"Krezkowe"}},{"id":242,"type":"Concept","parent":237,"order":2,"data":{"text":"Miedniczne"}},{"id":244,"type":"Concept","parent":237,"order":3,"data":{"text":"Okołowpustowe"}},{"id":245,"type":"Concept","parent":237,"order":4,"data":{"text":"Okołożołądkowe"}},{"id":246,"type":"Concept","parent":237,"order":5,"data":{"text":"Porto-kawalny"}},{"id":247,"type":"Concept","parent":237,"order":6,"data":{"text":"Aortalno-kawalne"}},{"id":248,"type":"Concept","parent":237,"order":7,"data":{"text":"Okołoaortalne"}},{"id":249,"type":"Concept","parent":237,"order":8,"data":{"text":"Biodrowe wspólne P"}},{"id":250,"type":"Concept","parent":237,"order":9,"data":{"text":"Biodrowe wspólne L"}},{"id":251,"type":"Concept","parent":237,"order":10,"data":{"text":"Biodrowe wewnętrzne P"}},{"id":252,"type":"Concept","parent":237,"order":11,"data":{"text":"Biodrowe wewnętrzne L"}},{"id":253,"type":"Concept","parent":237,"order":12,"data":{"text":"Biodrowe zewnętrzne P"}},{"id":254,"type":"Concept","parent":237,"order":13,"data":{"text":"Biodrowe zewnętrzne L"}},{"id":255,"type":"Concept","parent":237,"order":14,"data":{"text":"Mezorektum"}},{"id":256,"type":"Concept","parent":237,"order":15,"data":{"text":"Pachwinowe P"}},{"id":257,"type":"Concept","parent":237,"order":16,"data":{"text":"Pachwinowe L"}},{"id":259,"type":"Concept","parent":258,"order":0,"data":{"text":"Płyn"}},{"id":267,"type":"Concept","parent":258,"order":1,"data":{"text":"Zmiany onkologiczne"}},{"id":270,"type":"Concept","parent":269,"order":0,"data":{"text":"Ściany jelit"}},{"id":272,"type":"Concept","parent":269,"order":1,"data":{"text":"Okrężnica"}},{"id":274,"type":"Concept","parent":269,"order":2,"data":{"text":"Nacieki"}},{"id":277,"type":"Concept","parent":269,"order":3,"data":{"text":"Kolostomia"}},{"id":279,"type":"Concept","parent":269,"order":4,"data":{"text":"Zmiany onkologiczne"}},{"id":282,"type":"Concept","parent":281,"order":0,"data":{"text":"Zmiany onkologiczne"}},{"id":286,"type":"Concept","parent":281,"order":1,"data":{"text":"Przepuklina"}},{"id":291,"type":"Concept","parent":290,"order":0,"data":{"text":"Drożność"}},{"id":295,"type":"Concept","parent":290,"order":1,"data":{"text":"Żyła biodrowa"}},{"id":297,"type":"Concept","parent":290,"order":2,"data":{"text":"Aorta brzuszna"}},{"id":299,"type":"Concept","parent":290,"order":3,"data":{"text":"Żyła  wrotna"}},{"id":302,"type":"Concept","parent":301,"order":0,"data":{"text":"Zmiany onkologiczne"}},{"id":306,"type":"Concept","parent":301,"order":1,"data":{"text":"Złamania"}},{"id":309,"type":"Concept","parent":301,"order":2,"data":{"text":"Zmiany zwyrodnieniowe k-pa L-S"}},{"id":4,"type":"Property","parent":3,"order":0,"data":{"text":"badanie przed i po podaniu środka kontrastującego","connotation":0,"auto_include":false}},{"id":5,"type":"Property","parent":3,"order":1,"data":{"text":"badanie bez podania środka kontrastującego","connotation":0,"auto_include":false}},{"id":7,"type":"Property","parent":6,"order":0,"data":{"text":"dwie","connotation":0,"auto_include":false}},{"id":8,"type":"Property","parent":6,"order":1,"data":{"text":"trzy","connotation":0,"auto_include":false}},{"id":9,"type":"Property","parent":6,"order":2,"data":{"text":"z fazą opóźnioną po 15 minutach","connotation":0,"auto_include":false}},{"id":12,"type":"Property","parent":11,"order":0,"data":{"text":"ognisko przerzutowe","connotation":0,"auto_include":false}},{"id":13,"type":"Property","parent":11,"order":1,"data":{"text":"liczne ogniska przerzutowe obustronnie","connotation":0,"auto_include":false}},{"id":14,"type":"Property","parent":11,"order":2,"data":{"text":"Bez zmian ogniskowych, prawidłowo powietrzne","connotation":1,"auto_include":true}},{"id":16,"type":"Property","parent":15,"order":0,"data":{"text":"zagęszczenia zapalne","connotation":0,"auto_include":false}},{"id":19,"type":"Property","parent":18,"order":0,"data":{"text":"brak","connotation":1,"auto_include":true}},{"id":20,"type":"Property","parent":18,"order":1,"data":{"text":"w prawej jamie opłucnej w warstwie","connotation":-1,"auto_include":false}},{"id":21,"type":"Property","parent":18,"order":2,"data":{"text":"w lewej jamie opłucnej w warstwie","connotation":-1,"auto_include":false}},{"id":24,"type":"Property","parent":23,"order":0,"data":{"text":"niepowiększona","connotation":1,"auto_include":true}},{"id":25,"type":"Property","parent":23,"order":2,"data":{"text":"jednorodna","connotation":1,"auto_include":true}},{"id":26,"type":"Property","parent":23,"order":3,"data":{"text":"normodensyjna","connotation":1,"auto_include":true}},{"id":27,"type":"Property","parent":23,"order":7,"data":{"text":"powiększona w osi cc","connotation":0,"auto_include":false}},{"id":28,"type":"Property","parent":23,"order":8,"data":{"text":"o policyklicznych obrysach","connotation":-1,"auto_include":false}},{"id":30,"type":"Property","parent":29,"order":2,"data":{"text":"z obecnością ogniska przerzutowego w S","connotation":-1,"auto_include":false}},{"id":31,"type":"Property","parent":29,"order":0,"data":{"text":"bez zmian ogniskowych","connotation":1,"auto_include":true}},{"id":32,"type":"Property","parent":29,"order":2,"data":{"text":"z obecnością ogniska hiperwaskularnego w fazie tętniczej mm w S - najpewniej o charakterze naczyniaka","connotation":0,"auto_include":false}},{"id":33,"type":"Property","parent":29,"order":3,"data":{"text":"z obecnością kilku ognisk przerzutowych od kilku mm do","connotation":-1,"auto_include":false}},{"id":34,"type":"Property","parent":29,"order":4,"data":{"text":"z obecnością licznych ognisk przerzutowych od kilku mm do","connotation":-1,"auto_include":false}},{"id":35,"type":"Property","parent":29,"order":5,"data":{"text":"z ogniskiem o profilu wzmocnienia typowym dla FNH w S","connotation":-1,"auto_include":false}},{"id":37,"type":"Property","parent":36,"order":0,"data":{"text":"z obecnością torbieli w segmencie","connotation":0,"auto_include":false}},{"id":38,"type":"Property","parent":36,"order":1,"data":{"text":"hipodensyjna, z cechami stłuszczenia","connotation":0,"auto_include":false}},{"id":39,"type":"Property","parent":36,"order":2,"data":{"text":"powiększona w osi cc","connotation":-1,"auto_include":false}},{"id":40,"type":"Property","parent":36,"order":3,"data":{"text":"z cechami marskości","connotation":-1,"auto_include":false}},{"id":42,"type":"Property","parent":41,"order":0,"data":{"text":"z zaburzeniami perfuzji","connotation":-1,"auto_include":false}},{"id":45,"type":"Property","parent":44,"order":0,"data":{"text":"cienkościenny","connotation":1,"auto_include":true}},{"id":46,"type":"Property","parent":44,"order":1,"data":{"text":"stan po cholecystektomii","connotation":0,"auto_include":false}},{"id":47,"type":"Property","parent":44,"order":2,"data":{"text":"obkurczony","connotation":0,"auto_include":false}},{"id":48,"type":"Property","parent":44,"order":3,"data":{"text":"z pogrubioną ścianą do mm","connotation":-1,"auto_include":false}},{"id":50,"type":"Property","parent":49,"order":1,"data":{"text":"z obecnością kilku uwapnionych złogów","connotation":-1,"auto_include":false}},{"id":51,"type":"Property","parent":49,"order":2,"data":{"text":"z obecnością licznych uwapnionych złogów","connotation":-1,"auto_include":false}},{"id":52,"type":"Property","parent":49,"order":0,"data":{"text":"bez uwapnionych złogów.","connotation":1,"auto_include":true}},{"id":53,"type":"Property","parent":49,"order":1,"data":{"text":"z pojedynczym uwapnionym złogiem","connotation":-1,"auto_include":false}},{"id":55,"type":"Property","parent":54,"order":0,"data":{"text":"naciek w loży","connotation":-1,"auto_include":false}},{"id":57,"type":"Property","parent":56,"order":0,"data":{"text":"z zagęszczoną żółcią","connotation":0,"auto_include":false}},{"id":60,"type":"Property","parent":59,"order":0,"data":{"text":"nieposzerzone","connotation":1,"auto_include":false}},{"id":61,"type":"Property","parent":59,"order":1,"data":{"text":"poszerzone wewnątrzwątrobowo","connotation":-1,"auto_include":false}},{"id":62,"type":"Property","parent":59,"order":2,"data":{"text":"poszerzone w płacie lewym","connotation":-1,"auto_include":false}},{"id":63,"type":"Property","parent":59,"order":3,"data":{"text":"poszerzone w płacie prawym","connotation":-1,"auto_include":false}},{"id":64,"type":"Property","parent":59,"order":4,"data":{"text":"PŻW poszerzony mm","connotation":-1,"auto_include":false}},{"id":66,"type":"Property","parent":65,"order":0,"data":{"text":"endoproteza w PŻW i przewodach wątrobowych","connotation":0,"auto_include":false}},{"id":69,"type":"Property","parent":68,"order":0,"data":{"text":"prawidłowej wielkości","connotation":1,"auto_include":true}},{"id":70,"type":"Property","parent":68,"order":1,"data":{"text":"jednorodna","connotation":1,"auto_include":true}},{"id":71,"type":"Property","parent":68,"order":2,"data":{"text":"zanikowa","connotation":0,"auto_include":false}},{"id":72,"type":"Property","parent":68,"order":3,"data":{"text":"z cechami przebudowy tłuszczowej","connotation":0,"auto_include":false}},{"id":74,"type":"Property","parent":73,"order":0,"data":{"text":"bez zmian ogniskowych","connotation":1,"auto_include":true}},{"id":75,"type":"Property","parent":73,"order":1,"data":{"text":"z obecnością hipowaskularnej zmiany ogniskowej zlokalizowanej w","connotation":-1,"auto_include":false}},{"id":76,"type":"Property","parent":73,"order":2,"data":{"text":"z obecnością hiperwaskularnej zmiany ogniskowej zlokalizowanej w","connotation":-1,"auto_include":false}},{"id":77,"type":"Property","parent":73,"order":3,"data":{"text":"z obecnością zmiany ogniskowej mm zlokalizowanej","connotation":0,"auto_include":false}},{"id":79,"type":"Property","parent":78,"order":0,"data":{"text":"otoczona warstwą płynu","connotation":-1,"auto_include":false}},{"id":80,"type":"Property","parent":78,"order":1,"data":{"text":"z obecnością pseudotorbieli mm zlokalizowanej w","connotation":0,"auto_include":false}},{"id":83,"type":"Property","parent":82,"order":0,"data":{"text":"nieposzerzony","connotation":1,"auto_include":true}},{"id":84,"type":"Property","parent":82,"order":1,"data":{"text":"poszerzony w części dystalnej do mm","connotation":0,"auto_include":false}},{"id":85,"type":"Property","parent":82,"order":2,"data":{"text":"nieregularnie poszerzony w całości","connotation":0,"auto_include":false}},{"id":88,"type":"Property","parent":87,"order":0,"data":{"text":"prawidłowa","connotation":1,"auto_include":true}},{"id":89,"type":"Property","parent":87,"order":2,"data":{"text":"naciek ściany grubości, na odcinku , w okolicy","connotation":0,"auto_include":false}},{"id":90,"type":"Property","parent":87,"order":3,"data":{"text":"pogrubiona ściana mm","connotation":0,"auto_include":false}},{"id":91,"type":"Property","parent":87,"order":4,"data":{"text":"stan po totalnej gastrektomii, zespolenie bez wznowy","connotation":0,"auto_include":false}},{"id":93,"type":"Property","parent":92,"order":0,"data":{"text":"przepuklina rozworu okołoprzełykowego przepony","connotation":0,"auto_include":false}},{"id":96,"type":"Property","parent":95,"order":0,"data":{"text":"prawidłowa","connotation":1,"auto_include":true}},{"id":97,"type":"Property","parent":95,"order":1,"data":{"text":"bez zmian naciekowych","connotation":0,"auto_include":false}},{"id":98,"type":"Property","parent":95,"order":2,"data":{"text":"naciek ściany","connotation":-1,"auto_include":false}},{"id":99,"type":"Property","parent":95,"order":3,"data":{"text":"uchyłek","connotation":0,"auto_include":false}},{"id":102,"type":"Property","parent":101,"order":0,"data":{"text":"niezmieniona","connotation":1,"auto_include":true}},{"id":103,"type":"Property","parent":101,"order":1,"data":{"text":"powiększona w osi długiej","connotation":0,"auto_include":false}},{"id":105,"type":"Property","parent":104,"order":0,"data":{"text":"z licznymi, drobnymi zwapnieniami","connotation":0,"auto_include":false}},{"id":107,"type":"Property","parent":106,"order":0,"data":{"text":"otoczona rąbkiem płynu","connotation":-1,"auto_include":false}},{"id":108,"type":"Property","parent":106,"order":1,"data":{"text":"z torbielą","connotation":-1,"auto_include":false}},{"id":110,"type":"Property","parent":109,"order":0,"data":{"text":"stan po splenektomii, loża wolna","connotation":0,"auto_include":false}},{"id":112,"type":"Property","parent":111,"order":0,"data":{"text":"z ogniskiem hipodensyjnym","connotation":-1,"auto_include":false}},{"id":115,"type":"Property","parent":114,"order":0,"data":{"text":"niepowiększone","connotation":1,"auto_include":true}},{"id":116,"type":"Property","parent":114,"order":1,"data":{"text":"prawe niepowiększone","connotation":0,"auto_include":false}},{"id":117,"type":"Property","parent":114,"order":2,"data":{"text":"lewe niepowiększone","connotation":0,"auto_include":false}},{"id":119,"type":"Property","parent":118,"order":0,"data":{"text":"niskodensyjny guzek w nadnerczu prawym","connotation":0,"auto_include":false}},{"id":120,"type":"Property","parent":118,"order":1,"data":{"text":"niskodensyjny guzek w nadnerczu lewym","connotation":0,"auto_include":false}},{"id":121,"type":"Property","parent":118,"order":2,"data":{"text":"ognisko przerzutowe w nadnerczu prawym mm","connotation":-1,"auto_include":false}},{"id":122,"type":"Property","parent":118,"order":3,"data":{"text":"ognisko przerzutowe w nadnerczu lewym mm","connotation":-1,"auto_include":false}},{"id":125,"type":"Property","parent":124,"order":1,"data":{"text":"prawidłowej wielkości","connotation":1,"auto_include":false}},{"id":127,"type":"Property","parent":126,"order":0,"data":{"text":"bez zmian ogniskowych","connotation":1,"auto_include":true}},{"id":129,"type":"Property","parent":128,"order":0,"data":{"text":"bez uwapnionych złogów","connotation":1,"auto_include":true}},{"id":131,"type":"Property","parent":130,"order":0,"data":{"text":"Położone prawidłowo","connotation":1,"auto_include":true}},{"id":133,"type":"Property","parent":132,"order":0,"data":{"text":"bez zastoju moczu","connotation":1,"auto_include":true}},{"id":135,"type":"Property","parent":134,"order":0,"data":{"text":"z jednoczasowym zakontrastowaniem","connotation":1,"auto_include":true}},{"id":137,"type":"Property","parent":136,"order":0,"data":{"text":"z zachowanym jednoczasowym wydzielaniem","connotation":0,"auto_include":false}},{"id":139,"type":"Property","parent":138,"order":0,"data":{"text":"z obecnością kilku torbieli od kilku mm do","connotation":0,"auto_include":false}},{"id":141,"type":"Property","parent":140,"order":0,"data":{"text":"ze zredukowaną grubością kory nerkowej","connotation":0,"auto_include":false}},{"id":144,"type":"Property","parent":143,"order":0,"data":{"text":"poszerzone","connotation":-1,"auto_include":false}},{"id":146,"type":"Property","parent":145,"order":0,"data":{"text":"poszerzona","connotation":-1,"auto_include":false}},{"id":148,"type":"Property","parent":147,"order":0,"data":{"text":"z obecnością torbieli","connotation":-1,"auto_include":false}},{"id":149,"type":"Property","parent":147,"order":1,"data":{"text":"z obecnością torbieli centralnych","connotation":0,"auto_include":false}},{"id":151,"type":"Property","parent":150,"order":0,"data":{"text":"retrokawalny przebieg tętnicy nerkowej","connotation":0,"auto_include":false}},{"id":153,"type":"Property","parent":152,"order":0,"data":{"text":"z obecnością uwapnionego złogu w","connotation":-1,"auto_include":false}},{"id":154,"type":"Property","parent":152,"order":0,"data":{"text":"bez uwapnionych złogów","connotation":1,"auto_include":false}},{"id":156,"type":"Property","parent":155,"order":0,"data":{"text":"z patologicznym ogniskiem  mm, zlokalizowanym w , podejrzanym o zmianę rozrostową","connotation":-1,"auto_include":false}},{"id":157,"type":"Property","parent":155,"order":0,"data":{"text":"bez zmian ogniskowych","connotation":1,"auto_include":false}},{"id":159,"type":"Property","parent":158,"order":0,"data":{"text":"atroficzna","connotation":0,"auto_include":false}},{"id":160,"type":"Property","parent":158,"order":1,"data":{"text":"ze zredukowaną grubością kory do","connotation":0,"auto_include":false}},{"id":162,"type":"Property","parent":161,"order":0,"data":{"text":"położona prawidłowo","connotation":1,"auto_include":false}},{"id":164,"type":"Property","parent":163,"order":0,"data":{"text":"bez zastoju moczu","connotation":1,"auto_include":false}},{"id":165,"type":"Property","parent":163,"order":1,"data":{"text":"wodonercze","connotation":-1,"auto_include":false}},{"id":168,"type":"Property","parent":167,"order":0,"data":{"text":"położona prawidłowo","connotation":1,"auto_include":false}},{"id":170,"type":"Property","parent":169,"order":0,"data":{"text":"bez zastoju moczu","connotation":1,"auto_include":false}},{"id":171,"type":"Property","parent":169,"order":1,"data":{"text":"wodonercze","connotation":-1,"auto_include":false}},{"id":173,"type":"Property","parent":172,"order":0,"data":{"text":"z obecnością uwapnionego złogu w","connotation":-1,"auto_include":false}},{"id":174,"type":"Property","parent":172,"order":1,"data":{"text":"bez uwapnionych złogów","connotation":1,"auto_include":false}},{"id":176,"type":"Property","parent":175,"order":0,"data":{"text":"bez zmian ogniskowych","connotation":1,"auto_include":false}},{"id":177,"type":"Property","parent":175,"order":1,"data":{"text":"z patologicznym ogniskiem  mm, zlokalizowanym w , podejrzanym o zmianę rozrostową","connotation":-1,"auto_include":false}},{"id":179,"type":"Property","parent":178,"order":0,"data":{"text":"z obecnością torbieli","connotation":-1,"auto_include":false}},{"id":180,"type":"Property","parent":178,"order":1,"data":{"text":"z obecnością torbieli centralnych","connotation":0,"auto_include":false}},{"id":182,"type":"Property","parent":181,"order":0,"data":{"text":"retrokawalny przebieg tętnicy nerkowej","connotation":0,"auto_include":false}},{"id":184,"type":"Property","parent":183,"order":0,"data":{"text":"atroficzna","connotation":0,"auto_include":false}},{"id":185,"type":"Property","parent":183,"order":1,"data":{"text":"ze zredukowaną grubością kory do","connotation":0,"auto_include":false}},{"id":187,"type":"Property","parent":186,"order":0,"data":{"text":"poszerzone","connotation":-1,"auto_include":false}},{"id":189,"type":"Property","parent":188,"order":0,"data":{"text":"poszerzona","connotation":-1,"auto_include":false}},{"id":192,"type":"Property","parent":191,"order":0,"data":{"text":"nieposzerzone","connotation":1,"auto_include":true}},{"id":193,"type":"Property","parent":191,"order":1,"data":{"text":"lewy nieposzerzony","connotation":0,"auto_include":false}},{"id":194,"type":"Property","parent":191,"order":2,"data":{"text":"prawy nieposzerzony","connotation":0,"auto_include":false}},{"id":195,"type":"Property","parent":191,"order":3,"data":{"text":"prawy poszerzony do","connotation":-1,"auto_include":false}},{"id":196,"type":"Property","parent":191,"order":4,"data":{"text":"lewy poszerzony do","connotation":-1,"auto_include":false}},{"id":199,"type":"Property","parent":198,"order":0,"data":{"text":"gładki w obrysach, dobrze wypełniony","connotation":1,"auto_include":true}},{"id":200,"type":"Property","parent":198,"order":1,"data":{"text":"pusty","connotation":0,"auto_include":false}},{"id":201,"type":"Property","parent":198,"order":2,"data":{"text":"słabo wypełniony","connotation":0,"auto_include":false}},{"id":202,"type":"Property","parent":198,"order":3,"data":{"text":"podparty przez powiększony gruczoł krokowy","connotation":0,"auto_include":false}},{"id":203,"type":"Property","parent":198,"order":4,"data":{"text":"podparty przez powiększoną macicę","connotation":0,"auto_include":false}},{"id":204,"type":"Property","parent":198,"order":5,"data":{"text":"stan po cystektomii, loża wolna","connotation":0,"auto_include":false}},{"id":206,"type":"Property","parent":205,"order":0,"data":{"text":"naciek ściany","connotation":0,"auto_include":false}},{"id":207,"type":"Property","parent":205,"order":1,"data":{"text":"uchyłek ściany","connotation":0,"auto_include":false}},{"id":210,"type":"Property","parent":209,"order":0,"data":{"text":"niepowiększony","connotation":1,"auto_include":false}},{"id":211,"type":"Property","parent":209,"order":1,"data":{"text":"niezmieniony","connotation":1,"auto_include":true}},{"id":212,"type":"Property","parent":209,"order":2,"data":{"text":"powiększony","connotation":0,"auto_include":false}},{"id":213,"type":"Property","parent":209,"order":3,"data":{"text":"wymiarach","connotation":0,"auto_include":false}},{"id":214,"type":"Property","parent":209,"order":4,"data":{"text":"o gładkich obrysach","connotation":0,"auto_include":false}},{"id":216,"type":"Property","parent":215,"order":0,"data":{"text":"ze zwapnieniami","connotation":0,"auto_include":false}},{"id":217,"type":"Property","parent":215,"order":1,"data":{"text":"niejednorodny","connotation":0,"auto_include":false}},{"id":218,"type":"Property","parent":215,"order":2,"data":{"text":"usunięty, loża bez wznowy","connotation":0,"auto_include":false}},{"id":220,"type":"Property","parent":219,"order":0,"data":{"text":"symetryczne","connotation":0,"auto_include":false}},{"id":223,"type":"Property","parent":222,"order":0,"data":{"text":"niezmienione","connotation":1,"auto_include":true}},{"id":224,"type":"Property","parent":222,"order":1,"data":{"text":"oba jajniki prawidłowe","connotation":0,"auto_include":false}},{"id":225,"type":"Property","parent":222,"order":3,"data":{"text":"szyjka macicy o średnicy","connotation":0,"auto_include":false}},{"id":226,"type":"Property","parent":222,"order":4,"data":{"text":"usunięte, loża wolna","connotation":0,"auto_include":false}},{"id":229,"type":"Property","parent":228,"order":0,"data":{"text":"torbiel","connotation":0,"auto_include":false}},{"id":230,"type":"Property","parent":228,"order":1,"data":{"text":"guz","connotation":0,"auto_include":false}},{"id":232,"type":"Property","parent":231,"order":0,"data":{"text":"torbiel","connotation":0,"auto_include":false}},{"id":233,"type":"Property","parent":231,"order":1,"data":{"text":"guz","connotation":0,"auto_include":false}},{"id":235,"type":"Property","parent":234,"order":0,"data":{"text":"mięśniakowata","connotation":-1,"auto_include":false}},{"id":236,"type":"Property","parent":234,"order":1,"data":{"text":"trzon macicy o wymiarach","connotation":0,"auto_include":false}},{"id":239,"type":"Property","parent":238,"order":0,"data":{"text":"niepowiększone","connotation":1,"auto_include":true}},{"id":241,"type":"Property","parent":240,"order":0,"data":{"text":"niepowiększone","connotation":1,"auto_include":true}},{"id":243,"type":"Property","parent":242,"order":0,"data":{"text":"niepowiększone","connotation":1,"auto_include":true}},{"id":260,"type":"Property","parent":259,"order":0,"data":{"text":"bez płynu","connotation":1,"auto_include":true}},{"id":261,"type":"Property","parent":259,"order":1,"data":{"text":"bez patologicznych zbiorników płynowych","connotation":0,"auto_include":false}},{"id":262,"type":"Property","parent":259,"order":2,"data":{"text":"z niewielką ilościa płynu zapęcherzowo","connotation":-1,"auto_include":false}},{"id":263,"type":"Property","parent":259,"order":3,"data":{"text":"wodobrzusze","connotation":-1,"auto_include":false}},{"id":264,"type":"Property","parent":259,"order":4,"data":{"text":"z warstwą płynu przy wątrobie","connotation":-1,"auto_include":false}},{"id":265,"type":"Property","parent":259,"order":5,"data":{"text":"warstwa płynu przy flankach bocznych","connotation":-1,"auto_include":false}},{"id":266,"type":"Property","parent":259,"order":6,"data":{"text":"limfocele","connotation":-1,"auto_include":false}},{"id":268,"type":"Property","parent":267,"order":0,"data":{"text":"wszczepy otrzewnowe","connotation":-1,"auto_include":false}},{"id":271,"type":"Property","parent":270,"order":0,"data":{"text":"niepogrubione","connotation":1,"auto_include":true}},{"id":273,"type":"Property","parent":272,"order":0,"data":{"text":"uchyłkowata","connotation":0,"auto_include":false}},{"id":275,"type":"Property","parent":274,"order":0,"data":{"text":"naciek ściany jelita na długości , grubości","connotation":-1,"auto_include":false}},{"id":276,"type":"Property","parent":274,"order":1,"data":{"text":"naciek odbytnicy w odległości mm, na odcinku mm, grubość ściany mm","connotation":-1,"auto_include":false}},{"id":278,"type":"Property","parent":277,"order":0,"data":{"text":"obecna","connotation":0,"auto_include":false}},{"id":280,"type":"Property","parent":279,"order":0,"data":{"text":"okolica zespolenia bez wznowy","connotation":0,"auto_include":false}},{"id":283,"type":"Property","parent":282,"order":0,"data":{"text":"bez uchwytnych zmian","connotation":1,"auto_include":true}},{"id":284,"type":"Property","parent":282,"order":1,"data":{"text":"wszczep w bliźnie","connotation":-1,"auto_include":false}},{"id":285,"type":"Property","parent":282,"order":2,"data":{"text":"naciek","connotation":-1,"auto_include":false}},{"id":287,"type":"Property","parent":286,"order":0,"data":{"text":"w bliźnie","connotation":0,"auto_include":false}},{"id":288,"type":"Property","parent":286,"order":1,"data":{"text":"pachwinowa","connotation":0,"auto_include":false}},{"id":289,"type":"Property","parent":286,"order":2,"data":{"text":"kresy białej","connotation":0,"auto_include":false}},{"id":292,"type":"Property","parent":291,"order":0,"data":{"text":"prawidłowo drożne","connotation":1,"auto_include":true}},{"id":293,"type":"Property","parent":291,"order":1,"data":{"text":"miażdżycowe","connotation":0,"auto_include":false}},{"id":294,"type":"Property","parent":291,"order":2,"data":{"text":"krążenie oboczne","connotation":0,"auto_include":false}},{"id":296,"type":"Property","parent":295,"order":0,"data":{"text":"zakrzepica","connotation":-1,"auto_include":false}},{"id":298,"type":"Property","parent":297,"order":0,"data":{"text":"tętniak","connotation":-1,"auto_include":false}},{"id":300,"type":"Property","parent":299,"order":0,"data":{"text":"zakrzepica","connotation":-1,"auto_include":false}},{"id":303,"type":"Property","parent":302,"order":0,"data":{"text":"bez zmian podejrzanych onkologicznie","connotation":1,"auto_include":true}},{"id":304,"type":"Property","parent":302,"order":1,"data":{"text":"ogniska osteolityczne","connotation":-1,"auto_include":false}},{"id":305,"type":"Property","parent":302,"order":2,"data":{"text":"ognisko osteolityczne","connotation":-1,"auto_include":false}},{"id":307,"type":"Property","parent":306,"order":0,"data":{"text":"stan po złamaniu kompresyjnym trzonu L","connotation":-1,"auto_include":false}},{"id":308,"type":"Property","parent":306,"order":1,"data":{"text":"osteoporotyczne","connotation":0,"auto_include":false}},{"id":1,"type":"Section","parent":null,"order":0,"data":{"text":"Tomografia komputerowa jamy brzusznej i miednicy małej","category":"TK","discipline":"Radiologia"}},{"id":2,"type":"Subsection","parent":1,"order":0,"data":{"text":"Technika badania"}},{"id":10,"type":"Subsection","parent":1,"order":1,"data":{"text":"Płuca nadprzeponowo"}},{"id":17,"type":"Subsection","parent":1,"order":2,"data":{"text":"Jamy opłucnowe"}},{"id":22,"type":"Subsection","parent":1,"order":3,"data":{"text":"Wątroba"}},{"id":43,"type":"Subsection","parent":1,"order":4,"data":{"text":"Pęcherzyk żółciowy"}},{"id":58,"type":"Subsection","parent":1,"order":5,"data":{"text":"Drogi żółciowe"}},{"id":67,"type":"Subsection","parent":1,"order":6,"data":{"text":"Trzustka"}},{"id":81,"type":"Subsection","parent":1,"order":7,"data":{"text":"Przewód trzustkowy"}},{"id":86,"type":"Subsection","parent":1,"order":8,"data":{"text":"Żołądek"}},{"id":94,"type":"Subsection","parent":1,"order":9,"data":{"text":"Dwunastnica"}},{"id":100,"type":"Subsection","parent":1,"order":10,"data":{"text":"Śledziona"}},{"id":113,"type":"Subsection","parent":1,"order":11,"data":{"text":"Nadnercza"}},{"id":123,"type":"Subsection","parent":1,"order":12,"data":{"text":"Obie nerki"}},{"id":142,"type":"Subsection","parent":1,"order":13,"data":{"text":"Nerka prawa"}},{"id":166,"type":"Subsection","parent":1,"order":14,"data":{"text":"Nerka lewa"}},{"id":190,"type":"Subsection","parent":1,"order":15,"data":{"text":"Moczowody"}},{"id":197,"type":"Subsection","parent":1,"order":16,"data":{"text":"Pęcherz moczowy"}},{"id":208,"type":"Subsection","parent":1,"order":17,"data":{"text":"Gruczoł krokowy"}},{"id":221,"type":"Subsection","parent":1,"order":18,"data":{"text":"Narządy rodne"}},{"id":237,"type":"Subsection","parent":1,"order":19,"data":{"text":"Węzły chłonne"}},{"id":258,"type":"Subsection","parent":1,"order":20,"data":{"text":"Jama otrzewnej"}},{"id":269,"type":"Subsection","parent":1,"order":21,"data":{"text":"Jelita"}},{"id":281,"type":"Subsection","parent":1,"order":22,"data":{"text":"Powłoki"}},{"id":290,"type":"Subsection","parent":1,"order":23,"data":{"text":"Duże naczynia jamy brzusznej"}},{"id":301,"type":"Subsection","parent":1,"order":24,"data":{"text":"Elementy kostne objęte badaniem"}}]}');var p,c,y=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(a.prototype=o.prototype,new a)}}();!function(t){t.CLASS="class",t.CONST_ID="const_id"}(p||(p={})),function(t){t.NUMBER="Number",t.PROPERTY="Property",t.CONCEPT="Concept",t.SECTION="Section",t.SUBSECTION="Subsection"}(c||(c={}));var u=function(){function t(){this.registeredAssistancePlugins=[],this.register=function(t){console.log(t),console.log("Registering function ".concat(t.displayName," for ").concat(t.matchingSections.categories," ").concat(t.matchingSections.disciplines)),s.registeredAssistancePlugins.push(t)},this.report=new a(i),this.template=new r(d)}return Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),t.prototype.shouldExecute=function(t){var e=this.template.getRoot(),o=new Set(this.template.data.languages),a="*"===t.matchingSections.categories||t.matchingSections.categories.includes(e.data.category),n="*"===t.matchingSections.disciplines||t.matchingSections.disciplines.includes(e.data.discipline),r="*"===t.matchingSections.languages||t.matchingSections.languages.some((function(t){return o.has(t)})),i=a&&n&&r,d=this.areAssistancePluginsRequirementsSatisfiedByTemplate(t),p=i&&d;return p||console.info('"'.concat(t.displayName,'" will not be executed. Languages matching: ').concat(r,", category: ").concat(a,", discipline ").concat(n,", template requirements: ").concat(d)),p},t.prototype.execute=function(){console.info("STARTING CALCULATING");for(var t=0,e=0;e<this.registeredAssistancePlugins.length;e++){var o=this.registeredAssistancePlugins[e];if(this.shouldExecute(o)){try{console.info("start processing ".concat(o.displayName)),o.calculate(),t++}catch(t){console.info("processing ".concat(o.displayName," was interrupted by an error:")),console.error(t)}console.info("end processing ".concat(o.displayName))}}console.info("Engine finished AssistancePlugin execution. ".concat(t," out of ").concat(this.registeredAssistancePlugins.length," function applied!"))},t.prototype.checkRequirementsForAssistancePlugins=function(t){for(var e={},o=0;o<t.nodeRequirements.length;o++){var a=t.nodeRequirements[o],n="".concat(a.selector," ").concat(a.nodeType," ").concat(a.selectorType);if(e[n]={},a.selectorType===p.CLASS){var r=this.template.getNodesByClass(a.selector);if(r.length>0){e[n][a.selector]=!0;for(var i=!0,d=0;d<r.length;d++){var c=r[d];a.nodeType.toString()!==c.type&&(i=!1)}e[n]["all nodes have correct type?"]=i}else e[n]["was found?"]=!1}else if(a.selectorType===p.CONST_ID)try{c=this.template.getNodeByConstId(a.selector),e[n]["was found?"]=!0,e[n]["node has correct type?"]=a.nodeType.toString()===c.type}catch(t){e[n]["was found?"]=!1}else e[n]["valid selector type"]=!1}return e},t.prototype.areAssistancePluginsRequirementsSatisfiedByTemplate=function(t){return Object.values(this.checkRequirementsForAssistancePlugins(t)).every((function(t){return Object.values(t).every((function(t){return t}))}))},t.prototype.checkRequirements=function(){for(var t={},e=0;e<this.registeredAssistancePlugins.length;e++){var o=this.registeredAssistancePlugins[e];t[o.displayName]=this.areAssistancePluginsRequirementsSatisfiedByTemplate(o)}return t},t}(),l=function(t){function e(o){var a=t.call(this,o)||this;return Object.setPrototypeOf(a,e.prototype),a}return y(e,t),e.prototype.sayHello=function(){return"AssistancePlugin Stopped "+this.message},e}(Error),s=u.Instance;console.log("test")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d0JBQXlCLENBRWhELENBQ0EsT0FBT0osQ0FDVCxFQUVPLFlBQUFULG9EQUFQLFNBQ0VmLEdBRUEsT0FBT3NDLE9BQU9DLE9BQ1puRixLQUFLbUUsc0NBQXNDdkIsSUFDM0N3QyxPQUFNLFNBQUNDLEdBQVEsT0FBQUgsT0FBT0MsT0FBT0UsR0FBS0QsT0FBTSxTQUFDRSxHQUFNLE9BQUFBLENBQUEsR0FBaEMsR0FDbkIsRUFFTyxZQUFBQyxrQkFBUCxXQUVFLElBREEsSUFBSW5CLEVBQStCLENBQUMsRUFDM0JKLEVBQUksRUFBR0EsRUFBSWhFLEtBQUtnQyw0QkFBNEJqQixPQUFRaUQsSUFBSyxDQUNoRSxJQUFNcEIsRUFBbUI1QyxLQUFLZ0MsNEJBQTRCZ0MsR0FDMURJLEVBQUl4QixFQUFpQlQsYUFDbkJuQyxLQUFLMkQsb0RBQW9EZixFQUM3RCxDQUNBLE9BQU93QixDQUNULEVBQ0YsRUExSUEsR0E0SUEsY0FDRSxXQUFZb0IsR0FDVixRQUFLLFVBQUNBLElBQUksSyxPQUdWTixPQUFPTyxlQUFlLEVBQU16RSxFQUEwQjBFLFcsQ0FDeEQsQ0FLRixPQVgrQyxPQVE3QyxZQUFBQyxTQUFBLFdBQ0UsTUFBTyw0QkFBOEIzRixLQUFLNEYsT0FDNUMsRUFDRixFQVhBLENBQStDQyxPQWtDbENsRSxFQUE2Qm1FLEVBQTRCQyxTQy9MdEVyRixRQUFRQyxJQUFJLE8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91cG1lZGljLXNkay8uL3NyYy9Ob2RlU291cmNlLnRzIiwid2VicGFjazovL3VwbWVkaWMtc2RrLy4vc3JjL1JlcG9ydC50cyIsIndlYnBhY2s6Ly91cG1lZGljLXNkay8uL3NyYy9UZW1wbGF0ZS50cyIsIndlYnBhY2s6Ly91cG1lZGljLXNkay8uL3NyYy9Bc3Npc3RlZFJlcG9ydGluZ0NvbnRhaW5lci50cyIsIndlYnBhY2s6Ly91cG1lZGljLXNkay8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdG9wQXNzaXN0YW5jZVBsdWdpbkVycm9yIH0gZnJvbSAnLi9Bc3Npc3RlZFJlcG9ydGluZ0NvbnRhaW5lcic7XG5cbmV4cG9ydCBjbGFzcyBOb2RlU291cmNlIHtcbiAgZGF0YTogYW55O1xuICBjb25zdHJ1Y3RvcihkYXRhOiBhbnkpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICB9XG4gIGdldFJvb3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5ub2Rlcy5maWx0ZXIoKG46IGFueSkgPT4gbi5wYXJlbnQgPT09IG51bGwpWzBdO1xuICB9XG5cbiAgcHVibGljIHNldE51bWJlck5vZGVWYWx1ZShpZDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5nZXROb2RlQnlDb25zdElkKGlkKTtcbiAgICBjb25zb2xlLmxvZyhgc2V0dGluZyBudW1iZXIgbm9kZSAke2lkfSB0byAke3ZhbHVlfWApO1xuICB9XG5cbiAgcHVibGljIGdldE5vZGVzQnlDbGFzcyhjbGFzc05hbWU6IHN0cmluZyk6IEFycmF5PGFueT4ge1xuICAgIHJldHVybiB0aGlzLmRhdGFbJ25vZGVzJ10uZmlsdGVyKChuOiBhbnkpID0+XG4gICAgICBuLmRhdGFbJ2NsYXNzZXMnXT8uaW5jbHVkZXMoY2xhc3NOYW1lKSxcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGdldE5vZGVCeUNvbnN0SWQoaWQ6IHN0cmluZyk6IGFueSB7XG4gICAgY29uc3Qgbm9kZXMgPSB0aGlzLmRhdGFbJ25vZGVzJ10uZmlsdGVyKChuOiBhbnkpID0+IG4uZGF0YVsnY29uc3RfaWQnXSA9PT0gaWQpO1xuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBTdG9wQXNzaXN0YW5jZVBsdWdpbkVycm9yKFxuICAgICAgICBgTm9kZSB3aXRoIGlkICR7aWR9IGRvZXMgbm90IGV4aXN0IGluIHRoaXMgTm9kZVNvdXJjZWAsXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAobm9kZXMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc29sZS5lcnJvcignVHJ5aW5nIHRvIGdldCBtb3JlIHRoYW4gMSBub2RlIHdpdGggaWQgJyArIGlkKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGVzWzBdO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOb2RlU291cmNlIH0gZnJvbSAnLi9Ob2RlU291cmNlJztcblxuZXhwb3J0IGNsYXNzIFJlcG9ydCBleHRlbmRzIE5vZGVTb3VyY2Uge1xuICBhZGRUb0NvbmNsdXNpb25zKHNvdXJjZU5vZGVJZDogc3RyaW5nLCBjb25jbHVzaW9uVGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBgTm9kZSBpZDogXCIke3NvdXJjZU5vZGVJZH1cIiBhZGRzIHRvIGNvbmNsdXNpb25zIFwiJHtjb25jbHVzaW9uVGV4dH1cImAsXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBkZXNlbGVjdE5vZGVXaXRoSWQoaWQ6IHN0cmluZykge1xuICAgIGNvbnNvbGUubG9nKGBEZXNlbGVjdGluZyBub2RlIHdpdGggaWQgJHtpZH1gLCB0aGlzLmdldE5vZGVCeUNvbnN0SWQoaWQpKTtcbiAgfVxuXG4gIHB1YmxpYyBpc05vZGVJZEluUmVwb3J0KGlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBub2RlcyA9IHRoaXMuZGF0YVsnbm9kZXMnXS5maWx0ZXIoKG46IGFueSkgPT4gbi5kYXRhWydjb25zdF9pZCddID09PSBpZCk7XG4gICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAobm9kZXMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc29sZS5lcnJvcignVHJ5aW5nIHRvIGdldCBtb3JlIHRoYW4gMSBub2RlIHdpdGggaWQgJyArIGlkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsImltcG9ydCB7IE5vZGVTb3VyY2UgfSBmcm9tICcuL05vZGVTb3VyY2UnO1xuaW1wb3J0IHsgQXNzaXN0ZWRSZXBvcnRpbmdDb250YWluZXIgfSBmcm9tICcuL0Fzc2lzdGVkUmVwb3J0aW5nQ29udGFpbmVyJztcblxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlIGV4dGVuZHMgTm9kZVNvdXJjZSB7XG4gIHB1YmxpYyBzZWxlY3ROb2Rlc1dpdGhDbGFzcyhjbGFzc05hbWU6IHN0cmluZykge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYFNlbGVjdGluZyBub2RlIHdpdGggY2xhc3MgJHtjbGFzc05hbWV9YCxcbiAgICAgIHRoaXMuZ2V0Tm9kZXNCeUNsYXNzKGNsYXNzTmFtZSksXG4gICAgKTtcbiAgfVxuICBwdWJsaWMgc2VsZWN0Tm9kZVdpdGhJZChpZDogc3RyaW5nKSB7XG4gICAgY29uc29sZS5sb2coYFNlbGVjdGluZyBub2RlIHdpdGggaWQgJHtpZH1gLCB0aGlzLmdldE5vZGVCeUNvbnN0SWQoaWQpKTtcbiAgICBjb25zdCBub2RlID0gdGhpcy5nZXROb2RlQnlDb25zdElkKGlkKTtcbiAgICBBc3Npc3RlZFJlcG9ydGluZ0NvbnRhaW5lci5yZXBvcnQuZGF0YS5ub2Rlcy5wdXNoKG5vZGUpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBSZXBvcnQgfSBmcm9tICcuL1JlcG9ydCc7XG5pbXBvcnQgeyBUZW1wbGF0ZSB9IGZyb20gJy4vVGVtcGxhdGUnO1xuaW1wb3J0IHJlcG9ydCBmcm9tICcuL3NpbXVsYXRpb25EYXRhL3JlcG9ydC5qc29uJztcbmltcG9ydCB0ZW1wbGF0ZSBmcm9tICcuL3NpbXVsYXRpb25EYXRhL3RlbXBsYXRlLmpzb24nO1xuXG5leHBvcnQgZW51bSBTZWxlY3RvclR5cGUge1xuICBDTEFTUyA9ICdjbGFzcycsXG4gIENPTlNUX0lEID0gJ2NvbnN0X2lkJyxcbn1cbmV4cG9ydCBlbnVtIE5vZGVUeXBlIHtcbiAgTlVNQkVSID0gJ051bWJlcicsXG4gIFBST1BFUlRZID0gJ1Byb3BlcnR5JyxcbiAgQ09OQ0VQVCA9ICdDb25jZXB0JyxcbiAgU0VDVElPTiA9ICdTZWN0aW9uJyxcbiAgU1VCU0VDVElPTiA9ICdTdWJzZWN0aW9uJyxcbn1cblxuY2xhc3MgX0Fzc2lzdGVkUmVwb3J0aW5nQ29udGFpbmVyIHtcbiAgcmVwb3J0OiBSZXBvcnQ7XG4gIHRlbXBsYXRlOiBUZW1wbGF0ZTtcblxuICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IF9Bc3Npc3RlZFJlcG9ydGluZ0NvbnRhaW5lcjtcbiAgcHVibGljIHJlZ2lzdGVyZWRBc3Npc3RhbmNlUGx1Z2luczogQXJyYXk8QXNzaXN0YW5jZVBsdWdpbj4gPSBbXTtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVwb3J0ID0gbmV3IFJlcG9ydChyZXBvcnQpO1xuICAgIHRoaXMudGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUodGVtcGxhdGUpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXQgSW5zdGFuY2UoKSB7XG4gICAgLy8gRG8geW91IG5lZWQgYXJndW1lbnRzPyBNYWtlIGl0IGEgcmVndWxhciBzdGF0aWMgbWV0aG9kIGluc3RlYWQuXG4gICAgcmV0dXJuIHRoaXMuX2luc3RhbmNlIHx8ICh0aGlzLl9pbnN0YW5jZSA9IG5ldyB0aGlzKCkpO1xuICB9XG4gIHByaXZhdGUgc2hvdWxkRXhlY3V0ZShhc3Npc3RhbmNlUGx1Z2luOiBBc3Npc3RhbmNlUGx1Z2luKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdGVtcGxhdGVSb290ID0gdGhpcy50ZW1wbGF0ZS5nZXRSb290KCk7XG4gICAgY29uc3QgdGVtcGxhdGVMYW5ndWFnZXNTZXQgPSBuZXcgU2V0KHRoaXMudGVtcGxhdGUuZGF0YS5sYW5ndWFnZXMpO1xuXG4gICAgY29uc3QgaXNDYXRlZ29yeU9rID1cbiAgICAgIGFzc2lzdGFuY2VQbHVnaW4ubWF0Y2hpbmdTZWN0aW9ucy5jYXRlZ29yaWVzID09PSAnKicgfHxcbiAgICAgIGFzc2lzdGFuY2VQbHVnaW4ubWF0Y2hpbmdTZWN0aW9ucy5jYXRlZ29yaWVzLmluY2x1ZGVzKFxuICAgICAgICB0ZW1wbGF0ZVJvb3QuZGF0YS5jYXRlZ29yeSxcbiAgICAgICk7XG4gICAgY29uc3QgaXNEaXNjaXBsaW5lT2sgPVxuICAgICAgYXNzaXN0YW5jZVBsdWdpbi5tYXRjaGluZ1NlY3Rpb25zLmRpc2NpcGxpbmVzID09PSAnKicgfHxcbiAgICAgIGFzc2lzdGFuY2VQbHVnaW4ubWF0Y2hpbmdTZWN0aW9ucy5kaXNjaXBsaW5lcy5pbmNsdWRlcyhcbiAgICAgICAgdGVtcGxhdGVSb290LmRhdGEuZGlzY2lwbGluZSxcbiAgICAgICk7XG4gICAgY29uc3QgaXNMYW5ndWFnZU9rID1cbiAgICAgIGFzc2lzdGFuY2VQbHVnaW4ubWF0Y2hpbmdTZWN0aW9ucy5sYW5ndWFnZXMgPT09ICcqJyB8fFxuICAgICAgYXNzaXN0YW5jZVBsdWdpbi5tYXRjaGluZ1NlY3Rpb25zLmxhbmd1YWdlcy5zb21lKChsOiBzdHJpbmcpID0+XG4gICAgICAgIHRlbXBsYXRlTGFuZ3VhZ2VzU2V0LmhhcyhsKSxcbiAgICAgICk7XG4gICAgY29uc3QgaXNNZXRhZGF0YU9rID0gaXNDYXRlZ29yeU9rICYmIGlzRGlzY2lwbGluZU9rICYmIGlzTGFuZ3VhZ2VPaztcblxuICAgIGNvbnN0IGFyZVRlbXBsYXRlUmVxdWlyZW1lbnRzT2sgPVxuICAgICAgdGhpcy5hcmVBc3Npc3RhbmNlUGx1Z2luc1JlcXVpcmVtZW50c1NhdGlzZmllZEJ5VGVtcGxhdGUoYXNzaXN0YW5jZVBsdWdpbik7XG4gICAgY29uc3Qgd2lsbEJlUnVuID0gaXNNZXRhZGF0YU9rICYmIGFyZVRlbXBsYXRlUmVxdWlyZW1lbnRzT2s7XG4gICAgaWYgKCF3aWxsQmVSdW4pIHtcbiAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgYFwiJHthc3Npc3RhbmNlUGx1Z2luLmRpc3BsYXlOYW1lfVwiIHdpbGwgbm90IGJlIGV4ZWN1dGVkLiBMYW5ndWFnZXMgbWF0Y2hpbmc6ICR7aXNMYW5ndWFnZU9rfSwgY2F0ZWdvcnk6ICR7aXNDYXRlZ29yeU9rfSwgZGlzY2lwbGluZSAke2lzRGlzY2lwbGluZU9rfSwgdGVtcGxhdGUgcmVxdWlyZW1lbnRzOiAke2FyZVRlbXBsYXRlUmVxdWlyZW1lbnRzT2t9YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHdpbGxCZVJ1bjtcbiAgfVxuICBwdWJsaWMgZXhlY3V0ZSgpIHtcbiAgICBjb25zb2xlLmluZm8oJ1NUQVJUSU5HIENBTENVTEFUSU5HJyk7XG5cbiAgICBsZXQgZnVuY3Rpb25zQ291bnQgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlZ2lzdGVyZWRBc3Npc3RhbmNlUGx1Z2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXNzaXN0YW5jZVBsdWdpbjogQXNzaXN0YW5jZVBsdWdpbiA9IHRoaXMucmVnaXN0ZXJlZEFzc2lzdGFuY2VQbHVnaW5zW2ldO1xuICAgICAgaWYgKHRoaXMuc2hvdWxkRXhlY3V0ZShhc3Npc3RhbmNlUGx1Z2luKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnNvbGUuaW5mbyhgc3RhcnQgcHJvY2Vzc2luZyAke2Fzc2lzdGFuY2VQbHVnaW4uZGlzcGxheU5hbWV9YCk7XG4gICAgICAgICAgYXNzaXN0YW5jZVBsdWdpbi5jYWxjdWxhdGUoKTtcbiAgICAgICAgICBmdW5jdGlvbnNDb3VudCsrO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgICAgIGBwcm9jZXNzaW5nICR7YXNzaXN0YW5jZVBsdWdpbi5kaXNwbGF5TmFtZX0gd2FzIGludGVycnVwdGVkIGJ5IGFuIGVycm9yOmAsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmluZm8oYGVuZCBwcm9jZXNzaW5nICR7YXNzaXN0YW5jZVBsdWdpbi5kaXNwbGF5TmFtZX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5pbmZvKFxuICAgICAgYEVuZ2luZSBmaW5pc2hlZCBBc3Npc3RhbmNlUGx1Z2luIGV4ZWN1dGlvbi4gJHtmdW5jdGlvbnNDb3VudH0gb3V0IG9mICR7dGhpcy5yZWdpc3RlcmVkQXNzaXN0YW5jZVBsdWdpbnMubGVuZ3RofSBmdW5jdGlvbiBhcHBsaWVkIWAsXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlciA9IChjYWxjOiBBc3Npc3RhbmNlUGx1Z2luKSA9PiB7XG4gICAgY29uc29sZS5sb2coY2FsYyk7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBgUmVnaXN0ZXJpbmcgZnVuY3Rpb24gJHtjYWxjLmRpc3BsYXlOYW1lfSBmb3IgJHtjYWxjLm1hdGNoaW5nU2VjdGlvbnMuY2F0ZWdvcmllc30gJHtjYWxjLm1hdGNoaW5nU2VjdGlvbnMuZGlzY2lwbGluZXN9YCxcbiAgICApO1xuICAgIEFzc2lzdGVkUmVwb3J0aW5nQ29udGFpbmVyLnJlZ2lzdGVyZWRBc3Npc3RhbmNlUGx1Z2lucy5wdXNoKGNhbGMpO1xuICB9O1xuXG4gIHB1YmxpYyBjaGVja1JlcXVpcmVtZW50c0ZvckFzc2lzdGFuY2VQbHVnaW5zKFxuICAgIGFzc2lzdGFuY2VQbHVnaW46IEFzc2lzdGFuY2VQbHVnaW4sXG4gICk6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+PiB7XG4gICAgbGV0IHJldDogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgYm9vbGVhbj4+ID0ge307XG4gICAgZm9yIChsZXQgY0lkeCA9IDA7IGNJZHggPCBhc3Npc3RhbmNlUGx1Z2luLm5vZGVSZXF1aXJlbWVudHMubGVuZ3RoOyBjSWR4KyspIHtcbiAgICAgIGNvbnN0IHJlcXVpcmVtZW50ID0gYXNzaXN0YW5jZVBsdWdpbi5ub2RlUmVxdWlyZW1lbnRzW2NJZHhdO1xuICAgICAgY29uc3QgcmVxdWlyZW1lbnRJZCA9IGAke3JlcXVpcmVtZW50LnNlbGVjdG9yfSAke3JlcXVpcmVtZW50Lm5vZGVUeXBlfSAke3JlcXVpcmVtZW50LnNlbGVjdG9yVHlwZX1gO1xuICAgICAgcmV0W3JlcXVpcmVtZW50SWRdID0ge307XG4gICAgICBpZiAocmVxdWlyZW1lbnQuc2VsZWN0b3JUeXBlID09PSBTZWxlY3RvclR5cGUuQ0xBU1MpIHtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLnRlbXBsYXRlLmdldE5vZGVzQnlDbGFzcyhyZXF1aXJlbWVudC5zZWxlY3Rvcik7XG4gICAgICAgIGlmIChub2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmV0W3JlcXVpcmVtZW50SWRdW3JlcXVpcmVtZW50LnNlbGVjdG9yXSA9IHRydWU7XG4gICAgICAgICAgbGV0IGFsbE5vZGVzT2sgPSB0cnVlO1xuICAgICAgICAgIGZvciAobGV0IG5JZHggPSAwOyBuSWR4IDwgbm9kZXMubGVuZ3RoOyBuSWR4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tuSWR4XTtcbiAgICAgICAgICAgIGlmIChyZXF1aXJlbWVudC5ub2RlVHlwZS50b1N0cmluZygpICE9PSBub2RlLnR5cGUpIHtcbiAgICAgICAgICAgICAgYWxsTm9kZXNPayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXRbcmVxdWlyZW1lbnRJZF1bJ2FsbCBub2RlcyBoYXZlIGNvcnJlY3QgdHlwZT8nXSA9IGFsbE5vZGVzT2s7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0W3JlcXVpcmVtZW50SWRdWyd3YXMgZm91bmQ/J10gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZXF1aXJlbWVudC5zZWxlY3RvclR5cGUgPT09IFNlbGVjdG9yVHlwZS5DT05TVF9JRCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnRlbXBsYXRlLmdldE5vZGVCeUNvbnN0SWQocmVxdWlyZW1lbnQuc2VsZWN0b3IpO1xuICAgICAgICAgIHJldFtyZXF1aXJlbWVudElkXVsnd2FzIGZvdW5kPyddID0gdHJ1ZTtcbiAgICAgICAgICByZXRbcmVxdWlyZW1lbnRJZF1bJ25vZGUgaGFzIGNvcnJlY3QgdHlwZT8nXSA9XG4gICAgICAgICAgICByZXF1aXJlbWVudC5ub2RlVHlwZS50b1N0cmluZygpID09PSBub2RlLnR5cGU7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgcmV0W3JlcXVpcmVtZW50SWRdWyd3YXMgZm91bmQ/J10gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0W3JlcXVpcmVtZW50SWRdWyd2YWxpZCBzZWxlY3RvciB0eXBlJ10gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIHB1YmxpYyBhcmVBc3Npc3RhbmNlUGx1Z2luc1JlcXVpcmVtZW50c1NhdGlzZmllZEJ5VGVtcGxhdGUoXG4gICAgYXNzaXN0YW5jZVBsdWdpbjogQXNzaXN0YW5jZVBsdWdpbixcbiAgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoXG4gICAgICB0aGlzLmNoZWNrUmVxdWlyZW1lbnRzRm9yQXNzaXN0YW5jZVBsdWdpbnMoYXNzaXN0YW5jZVBsdWdpbiksXG4gICAgKS5ldmVyeSgodmFsKSA9PiBPYmplY3QudmFsdWVzKHZhbCkuZXZlcnkoKHYpID0+IHYpKTtcbiAgfVxuXG4gIHB1YmxpYyBjaGVja1JlcXVpcmVtZW50cygpOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiB7XG4gICAgbGV0IHJldDogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmVnaXN0ZXJlZEFzc2lzdGFuY2VQbHVnaW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBhc3Npc3RhbmNlUGx1Z2luID0gdGhpcy5yZWdpc3RlcmVkQXNzaXN0YW5jZVBsdWdpbnNbaV07XG4gICAgICByZXRbYXNzaXN0YW5jZVBsdWdpbi5kaXNwbGF5TmFtZV0gPVxuICAgICAgICB0aGlzLmFyZUFzc2lzdGFuY2VQbHVnaW5zUmVxdWlyZW1lbnRzU2F0aXNmaWVkQnlUZW1wbGF0ZShhc3Npc3RhbmNlUGx1Z2luKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RvcEFzc2lzdGFuY2VQbHVnaW5FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobXNnOiBzdHJpbmcpIHtcbiAgICBzdXBlcihtc2cpO1xuXG4gICAgLy8gU2V0IHRoZSBwcm90b3R5cGUgZXhwbGljaXRseS5cbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgU3RvcEFzc2lzdGFuY2VQbHVnaW5FcnJvci5wcm90b3R5cGUpO1xuICB9XG5cbiAgc2F5SGVsbG8oKSB7XG4gICAgcmV0dXJuICdBc3Npc3RhbmNlUGx1Z2luIFN0b3BwZWQgJyArIHRoaXMubWVzc2FnZTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFzc2lzdGFuY2VQbHVnaW4ge1xuICBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBtYXRjaGluZ1NlY3Rpb25zOiBNYXRjaGluZ1NlY3Rpb25zO1xuICBub2RlUmVxdWlyZW1lbnRzOiBOb2RlUmVxdWlyZW1lbnRbXTtcbiAgY2FsY3VsYXRlKCk6IHZvaWQ7XG59XG5cbmludGVyZmFjZSBNYXRjaGluZ1NlY3Rpb25zIHtcbiAgLyoqIHdpbGRjYXJkICcqJyBhbGxvd3MgdG8gdXNlIEFzc2lzdGFuY2VQbHVnaW4gZm9yIGFsbCBjYXRlZ29yaWVzIG9yIGRpc2NpcGxpbmVzICovXG4gIGNhdGVnb3JpZXM6ICcqJyB8IHN0cmluZ1tdO1xuICBkaXNjaXBsaW5lczogJyonIHwgc3RyaW5nW107XG4gIGxhbmd1YWdlczogJyonIHwgc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZVJlcXVpcmVtZW50IHtcbiAgc2VsZWN0b3JUeXBlOiBTZWxlY3RvclR5cGU7XG4gIG5vZGVUeXBlOiBOb2RlVHlwZTtcbiAgc2VsZWN0b3I6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IEFzc2lzdGVkUmVwb3J0aW5nQ29udGFpbmVyID0gX0Fzc2lzdGVkUmVwb3J0aW5nQ29udGFpbmVyLkluc3RhbmNlO1xuIiwiY29uc29sZS5sb2coJ3Rlc3QnKVxuXG5leHBvcnQgKiBmcm9tICcuL0Fzc2lzdGVkUmVwb3J0aW5nQ29udGFpbmVyJ1xuZXhwb3J0ICogZnJvbSAnLi9Ob2RlU291cmNlJ1xuZXhwb3J0ICogZnJvbSAnLi9SZXBvcnQnXG5leHBvcnQgKiBmcm9tICcuL1RlbXBsYXRlJyJdLCJuYW1lcyI6WyJkYXRhIiwidGhpcyIsImdldFJvb3QiLCJub2RlcyIsImZpbHRlciIsIm4iLCJwYXJlbnQiLCJzZXROdW1iZXJOb2RlVmFsdWUiLCJpZCIsInZhbHVlIiwiZ2V0Tm9kZUJ5Q29uc3RJZCIsImNvbnNvbGUiLCJsb2ciLCJnZXROb2Rlc0J5Q2xhc3MiLCJjbGFzc05hbWUiLCJpbmNsdWRlcyIsImxlbmd0aCIsIlN0b3BBc3Npc3RhbmNlUGx1Z2luRXJyb3IiLCJlcnJvciIsImFkZFRvQ29uY2x1c2lvbnMiLCJzb3VyY2VOb2RlSWQiLCJjb25jbHVzaW9uVGV4dCIsImRlc2VsZWN0Tm9kZVdpdGhJZCIsImlzTm9kZUlkSW5SZXBvcnQiLCJOb2RlU291cmNlIiwic2VsZWN0Tm9kZXNXaXRoQ2xhc3MiLCJzZWxlY3ROb2RlV2l0aElkIiwibm9kZSIsIkFzc2lzdGVkUmVwb3J0aW5nQ29udGFpbmVyIiwicmVwb3J0IiwicHVzaCIsIlNlbGVjdG9yVHlwZSIsIk5vZGVUeXBlIiwicmVnaXN0ZXJlZEFzc2lzdGFuY2VQbHVnaW5zIiwicmVnaXN0ZXIiLCJjYWxjIiwiZGlzcGxheU5hbWUiLCJtYXRjaGluZ1NlY3Rpb25zIiwiY2F0ZWdvcmllcyIsImRpc2NpcGxpbmVzIiwiUmVwb3J0IiwidGVtcGxhdGUiLCJUZW1wbGF0ZSIsIl9pbnN0YW5jZSIsInNob3VsZEV4ZWN1dGUiLCJhc3Npc3RhbmNlUGx1Z2luIiwidGVtcGxhdGVSb290IiwidGVtcGxhdGVMYW5ndWFnZXNTZXQiLCJTZXQiLCJsYW5ndWFnZXMiLCJpc0NhdGVnb3J5T2siLCJjYXRlZ29yeSIsImlzRGlzY2lwbGluZU9rIiwiZGlzY2lwbGluZSIsImlzTGFuZ3VhZ2VPayIsInNvbWUiLCJsIiwiaGFzIiwiaXNNZXRhZGF0YU9rIiwiYXJlVGVtcGxhdGVSZXF1aXJlbWVudHNPayIsImFyZUFzc2lzdGFuY2VQbHVnaW5zUmVxdWlyZW1lbnRzU2F0aXNmaWVkQnlUZW1wbGF0ZSIsIndpbGxCZVJ1biIsImluZm8iLCJleGVjdXRlIiwiZnVuY3Rpb25zQ291bnQiLCJpIiwiY2FsY3VsYXRlIiwiZXgiLCJjaGVja1JlcXVpcmVtZW50c0ZvckFzc2lzdGFuY2VQbHVnaW5zIiwicmV0IiwiY0lkeCIsIm5vZGVSZXF1aXJlbWVudHMiLCJyZXF1aXJlbWVudCIsInJlcXVpcmVtZW50SWQiLCJzZWxlY3RvciIsIm5vZGVUeXBlIiwic2VsZWN0b3JUeXBlIiwiQ0xBU1MiLCJhbGxOb2Rlc09rIiwibklkeCIsInRvU3RyaW5nIiwidHlwZSIsIkNPTlNUX0lEIiwiT2JqZWN0IiwidmFsdWVzIiwiZXZlcnkiLCJ2YWwiLCJ2IiwiY2hlY2tSZXF1aXJlbWVudHMiLCJtc2ciLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsInNheUhlbGxvIiwibWVzc2FnZSIsIkVycm9yIiwiX0Fzc2lzdGVkUmVwb3J0aW5nQ29udGFpbmVyIiwiSW5zdGFuY2UiXSwic291cmNlUm9vdCI6IiJ9